# pricing-api

This is the first attempt at generating a golden path repo/pipeline and service

**Team:** red
**Namespace:** red-dev
**Cluster:** shared-dev-cluster

## Quick Start

This service was created using the Golden Path template and is configured for immediate deployment to the shared development cluster.

### Local Development

```bash
# Install dependencies
npm install

# Run in development mode
npm run dev

# Run tests
npm test

# Lint code
npm run lint
```

### Architecture

- **Framework:** Express.js
- **Runtime:** Node.js 20
- **Container:** Docker multi-stage build
- **Deployment:** Kubernetes via Helm + ArgoCD
- **Monitoring:** Prometheus metrics at `/metrics`

### Endpoints

- `GET /` - Service information
- `GET /health` - Health check (liveness probe)
- `GET /ready` - Readiness check
- `GET /metrics` - Prometheus metrics
- `GET /api/hello` - Example API endpoint

### CI/CD Pipeline

Every push to `main` triggers:
1. Linting and tests
2. Docker image build
3. Push to GitHub Container Registry
4. ArgoCD automatic deployment

### Resource Limits

- **CPU Request:** 100m
- **CPU Limit:** 500m
- **Memory Request:** 128Mi
- **Memory Limit:** 512Mi

### Namespace Isolation

This service runs in the `red-dev` namespace with:
- **Resource Quota:** 2 CPU / 4GB RAM (team-wide)
- **Network Policy:** Default-deny ingress (must explicitly allow traffic)
- **Limit Ranges:** Automatic resource limits for all pods

### Monitoring

Prometheus ServiceMonitor is automatically configured to scrape `/metrics` every 30 seconds.

### Adding Dependencies

```bash
npm install <package-name>
```

Commit the updated `package.json` and `package-lock.json`.

### Deployment

Deployments are fully automated via GitOps:

1. Push code to `main` branch
2. GitHub Actions builds and pushes Docker image
3. ArgoCD detects new image and syncs deployment
4. Health checks verify deployment success

**Note:** To manually sync, use the ArgoCD UI or CLI.

---

ðŸ¥š **Generated by Golden Path Template**
